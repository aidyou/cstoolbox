# ChatSpeed Toolbox (CSToolbox)

ç®€ä½“ä¸­æ–‡ | [English](README.MD)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä½œä¸º [ChatSpeed](https://github.com/aidyou/chatspeed) çš„æ‰©å±•å·¥å…·é›†ï¼Œæä¾›ç½‘ç»œæœç´¢ã€ç½‘é¡µå†…å®¹çˆ¬å–å’Œå›¾è¡¨ç”Ÿæˆç­‰åŠŸèƒ½ã€‚

## åè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT åè®®](LICENSE) å¼€æºï¼Œæ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç½‘ç»œæœç´¢** - æ”¯æŒå¤šç§æœç´¢å¼•æ“ï¼ˆGoogleã€Bingã€ç™¾åº¦ç­‰ï¼‰
- ğŸ•·ï¸ **ç½‘é¡µçˆ¬å–** - ä»ç½‘é¡µæå–ç»“æ„åŒ–å†…å®¹ï¼ˆæ”¯æŒ Markdown/HTML æ ¼å¼ï¼‰
- ğŸ“Š **å›¾è¡¨ç”Ÿæˆ** - å¿«é€Ÿç”Ÿæˆå„ç±»æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼Œæ”¯æŒæ›²çº¿å›¾ã€æŸ±çŠ¶å›¾å’Œé¥¼å›¾
- ğŸ“„ **PDFå¤„ç†** - ä»PDFæ–‡æ¡£æå–æ–‡æœ¬å†…å®¹

## å®‰è£…æ–¹å¼

### Docker å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# å¿«é€Ÿå¯åŠ¨
docker run -d \
  --name cstb \
  --restart always \
  -p 12321:12321 \
  -e CS_BROWSER_POOL_MIN_SIZE=2 \
  -e CS_BROWSER_POOL_MAX_SIZE=10 \
  -e CS_REGION=com \
  -e TZ=Asia/Shanghai \
  -e CS_BROWSER_LANG=zh-CN \
  insuns/cstoolbox:latest
```

### æˆ–ä½¿ç”¨ docker-compose

docker-compose.yml

```yaml
services:
  crawler:
    image: insuns/cstoolbox:latest
    container_name: cstb
    working_dir: /app
    command: ["python", "api.py"]
    environment:
      # æ—¶åŒºè®¾ç½®ï¼Œä½ å¯ä»¥æ”¹ä¸ºä½ è‡ªå·±çš„æ—¶åŒº
      - TZ=Asia/Shanghai
      #
      # Set the browser language, default is en-US, you can change it to your own language.
      - CS_BROWSER_LANG=zh-CN
      #
      # The port used by the server. If not defined, the default port is 12321.
      # - CS_SERVER_PORT=12321
      #
      # The minimum thread pool created when the browser starts. Enabling the thread pool can accelerate the data crawling speed.
      - CS_BROWSER_POOL_MIN_SIZE = 2
      # The maximum thread pool size allowed for the browser
      - CS_BROWSER_POOL_MAX_SIZE = 10
      # your proxy server for browser
      # - CS_PROXY=http://host.docker.internal:15154
      #
      # region for search engine, com, cn, us, etc. default: com
      # - CS_REGION=com
      #
      # define browser user agent
      # - CS_USER_AGENT = ''
      #
      # define user agent mode, can be "random" or None, If None, use the provided user_agent as-is. Default: None.
      # - CS_USER_AGENT_MODE = None
      #
      # The directory used to store browser data. Usually, it does not need to be defined.
      # If you define an address, it is recommended to mount the local directory.
      # - CS_USER_DATA_DIR = '/path/to/user/data/dir'
      #
      # log level, can be 'DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'
      # - CS_LOG_LEVEL = 'INFO'
      #
      # The screenshot config for playwright. if true, the screenshot will be saved in logs dir.
      # - CS_SCREENSHOT = True

    restart: always
    ports:
      - "127.0.0.1:12321:12321"
```

æ‰§è¡Œ:

```bash
docker-compose up -d
```

### Conda å®‰è£…

1. å…‹éš†æºä»£ç ä»“åº“:

```bash
git clone https://github.com/aidyou/cstoolbox.git
cd cstoolbox
```

2. åˆ›å»ºå¹¶æ¿€æ´»condaç¯å¢ƒ:

```bash
conda create -n cstoolbox python=3.10
conda activate cstoolbox
```

3. å®‰è£…ä¾èµ–:

```bash
pip install -r requirements.txt
```

4. å¯åŠ¨æœåŠ¡:

```bash
python api.py
```

## API ä½¿ç”¨

### è°ƒç”¨ç¤ºä¾‹

```python
import requests

# ç½‘é¡µæœç´¢
response = requests.get("http://localhost:12321/chp/web_search", params={
    "provider": "google",
    "kw": "äººå·¥æ™ºèƒ½",
    "page": 1,
    "number": 10
})

# ç½‘é¡µçˆ¬å–
response = requests.get("http://localhost:12321/chp/web_crawler", params={
    "url": "https://example.com",
    "format": "markdown"
})

# å›¾è¡¨ç”Ÿæˆ
response = requests.post("http://localhost:12321/chp/plot", json={
    "plot_type": "bar",
    "data": {"x": [1,2,3], "y": [4,5,6]},
    "title": "ç¤ºä¾‹å›¾è¡¨"
})

# ä¸‹è½½ pdf å¹¶è§£æ
response = requests.get("http://localhost:12321/chp/pdf", params={
    "url": "https://domain.com/path/to/file.pdf"
})
```

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python api.py
```

## åç»­ç‰ˆæœ¬è®¡åˆ’

å½“å‰ç‰ˆæœ¬ä¸ºè¿‡æ¸¡ç‰ˆï¼Œåç»­å°†é…åˆ [Chatspeed](https://github.com/aidyou/chatspeed)  æ–°å¢ MCP åè®®

### åè®®å‡çº§è‡³MCP

âš ï¸ é‡è¦å˜æ›´ï¼šä¸ºäº†æå‡ç³»ç»Ÿæ€§èƒ½å’Œæ‰©å±•èƒ½åŠ›ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨ä¸‹ä¸ªä¸»è¦ç‰ˆæœ¬(v0.2)ä¸­å°† æ–°å¢MCP(Model Context Protocol)åè®®ã€‚ç°æœ‰æ¥å£ä¸å—å½±å“ï¼Œåç»­æ¥å£å°†å…¨éƒ¨é‡‡ç”¨MCPåè®®ã€‚
